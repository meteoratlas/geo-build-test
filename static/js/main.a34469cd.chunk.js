(this["webpackJsonpgeometry-game"]=this["webpackJsonpgeometry-game"]||[]).push([[0],{19:function(e,t,o){e.exports=o(36)},24:function(e,t,o){},35:function(e,t,o){},36:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),a=o(16),r=o.n(a),s=(o(24),o(1)),c=o(3),l=o(5),h=o(4),u=o(6),d=o(2),v=function(e){function t(e){var o;return Object(s.a)(this,t),(o=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},o}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"sidebar",className:this.props.hidden?"hidden":""},i.a.createElement("button",{onClick:this.props.moveUp},"Up"),i.a.createElement("button",{onClick:this.props.moveDown},"Down"),i.a.createElement("button",{onClick:this.props.moveLeft},"Left"),i.a.createElement("button",{onClick:this.props.moveRight},"Right"))}}]),t}(n.Component),f=o(9);var p=function(e){var t={};t.value=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.key===t.value&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1,e.preventDefault())},t.upHandler=function(e){e.key===t.value&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0,e.preventDefault())};var o=t.downHandler.bind(t),n=t.upHandler.bind(t);return window.addEventListener("keydown",o,!1),window.addEventListener("keyup",n,!1),t.unsubscribe=function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",n)},t},m=o(18),w=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"worldToLocal",value:function(e){return e.map((function(e,t){return t%2!==0?-e:e}))}},{key:"localToWorld",value:function(e){return e.map((function(e){return e+10}))}},{key:"checkWin",value:function(e,t){return e.length===t.length&&e.every((function(e,o){return e===t[o]}))}},{key:"checkIfInGrid",value:function(e,t){return e.every((function(e){return e<=Math.abs(t)}))}},{key:"pointInTri",value:function(e,t,o){var n=this.worldToLocal(e),i=Object(m.a)(n,6),a=i[0],r=i[1],s=i[2],c=i[3],l=i[4],h=i[5],u=Math.abs((s-a)*(h-r)-(l-a)*(c-r));return Math.abs((a-t)*(c-o)-(s-t)*(r-o))+Math.abs((s-t)*(h-o)-(l-t)*(c-o))+Math.abs((l-t)*(r-o)-(a-t)*(h-o))===u}}]),e}();w.HORIZONTAL="horizontal",w.VERTICAL="vertical";var b=function(e){function t(e,o,n,i){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this))).x=e,a.y=o,a.boardSize=n,a.cellSize=i,a.allowMove=!0,a.animateSpeed=.4,a.coords=[0,0,0,2,2,2];var r=p("ArrowLeft"),c=p("ArrowUp"),u=p("ArrowRight"),d=p("ArrowDown"),v=p("q"),f=p("e"),m=p("h"),w=p("v");return v.press=function(){a.allowMove&&a.rotate(90,a.coords[0],a.coords[1],a.coords)},f.press=function(){a.allowMove&&a.rotate(-90,a.coords[0],a.coords[1],a.coords)},r.press=function(){a.translate(-1,0)},u.press=function(){a.translate(1,0)},c.press=function(){a.translate(0,-1)},d.press=function(){a.translate(0,1)},m.press=function(){a.reflect(!0)},w.press=function(){a.reflect(!1)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onMoveComplete",value:function(){}},{key:"translate",value:function(e,t){var o=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.allowMove)if(n)this.allowMove=!1,f.a.to(this.coords,{0:this.coords[0]+e,1:this.coords[1]+t,2:this.coords[2]+e,3:this.coords[3]+t,4:this.coords[4]+e,5:this.coords[5]+t,duration:this.animateSpeed,ease:"bounce.out",onComplete:function(){o.allowMove=!0,console.log(w.worldToLocal(o.coords))}});else for(var i=0;i<this.coords.length;i++)this.coords[i]+=i%2===1?t:e}},{key:"rotate",value:function(e,t,o,n){var i=this;if(this.allowMove){this.allowMove=!1,e*=Math.PI/180;for(var a=Math.sin(e),r=Math.cos(e),s=n.concat(),c=[],l=0;l<n.length;l+=2)c[l]=Math.round((s[l]-t)*r+(s[l+1]-o)*a+t),c[l+1]=Math.round((s[l+1]-o)*r-(s[l]-t)*a+o);f.a.to(this.coords,{0:c[0],1:c[1],2:c[2],3:c[3],4:c[4],5:c[5],duration:this.animateSpeed,ease:"bounce.out",onComplete:function(){i.allowMove=!0}})}}},{key:"reflect",value:function(e){var t=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.allowMove&&(this.allowMove=!1,o&&(e?f.a.to(this.coords,{0:-1*this.coords[0],2:-1*this.coords[2],4:-1*this.coords[4],duration:this.animateSpeed,ease:"bounce.out",onComplete:function(){t.allowMove=!0}}):f.a.to(this.coords,{1:-1*this.coords[1],3:-1*this.coords[3],5:-1*this.coords[5],duration:this.animateSpeed,ease:"bounce.out",onComplete:function(){t.allowMove=!0}})))}},{key:"draw",value:function(){var e=w.localToWorld(this.coords),t=this.cellSize;this.clear(),this.beginFill(16711680),this.lineStyle(2),this.moveTo(e[0]*t,e[1]*t),this.lineTo(e[2]*t,e[3]*t),this.lineTo(e[4]*t,e[5]*t),this.closePath(),this.endFill()}}]),t}(d.c),y=function(e){function t(e,o){var n;Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).width=e,n.height=o,n.x=-e-80,n.y=0,n.tris=4,n.triWidth=80,n.triHeight=o/n.tris,n.time=1,n.delay=.5,n.beginFill(0),n.drawRect(0,0,e,o);for(var i=0;i<n.tris;i++)n.moveTo(e,i*n.triHeight),n.lineTo(e+n.triWidth,n.triHeight*i+n.triHeight/2),n.lineTo(e,n.triHeight*i+n.triHeight);return n.closePath(),n.endFill(),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"transitionIn",value:function(e){f.a.to(this,{x:e,duration:this.time,delay:this.delay,ease:"quint-inout",onComplete:this.transitionDone})}},{key:"transitionOut",value:function(e){f.a.to(this,{x:e,duration:this.time,delay:this.delay,ease:"quint-inout",onComplete:this.transitionDone})}},{key:"transitionDone",value:function(){}}]),t}(d.c),g=function(e){function t(e,o,n,i){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this))).clear(),a.beginFill(16777215),a.drawRect(e,o,n,i),a.endFill(),a.lineStyle(2,2236962,1);for(var r=0,c=0;c<=n;c+=n/20)10===r?a.lineStyle(2,15606510,1):a.lineStyle(2,2236962,1),a.moveTo(c+e,o),a.lineTo(c+e,i+o),r++;r=0;for(var u=0;u<=i;u+=i/20)10===r?a.lineStyle(2,15606510,1):a.lineStyle(2,2236962,1),a.moveTo(e,o+u),a.lineTo(n+e,u+o),r++;return a}return Object(u.a)(t,e),t}(d.c),k=function(e){function t(e,o,n){var i;Object(s.a)(this,t),i=Object(l.a)(this,Object(h.a)(t).call(this));for(var a=[],r=0;r<=20;r+=5)if(10!==r){var c=new d.d(r-10,{fontSize:20,fill:1052688});i.addChild(c),c.x=r*n+10,c.y=o,a.push(c)}for(var u=0;u<=20;u+=5){var v=new d.d(20-u-10,{fontSize:20,fill:1052688});i.addChild(v),v.x=e+20,v.y=u*n-2.5,a.push(v)}return i.cacheAsBitmap=!0,i}return Object(u.a)(t,e),t}(d.b),O=function(e){function t(e,o){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).x+=16,n.y+=16,n.coords=e,n.cellSize=o,n.draw(),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(){var e=w.localToWorld(this.coords),t=this.cellSize;this.clear(),this.beginFill(6710886),this.lineStyle(2),this.moveTo(e[0]*t,e[1]*t),this.lineTo(e[2]*t,e[3]*t),this.lineTo(e[4]*t,e[5]*t),this.closePath(),this.endFill()}}]),t}(d.c),j=function(){function e(t,o){Object(s.a)(this,e),this.app=t,this.entities=[],this.tri=void 0,this.goal=void 0,this.allowMove=!0}return Object(c.a)(e,[{key:"start",value:function(){var e=this,t=new d.b,o=new d.b;t.addChild(o),this.app.stage.addChild(t);var n=new g(16,16,500,500);o.addChild(n);var i=new k(250,250,25);p("p").press=function(){console.log(e.tri.coords,e.goal.coords),console.log(w.checkWin(e.tri.coords,e.goal.coords))},this.tri=new b(16,16,500,25),o.addChild(i),this.goal=new O([3,3,3,5,5,5],25),o.addChild(this.goal),o.addChild(this.tri),this.app.stage.addChild(new y(1024,576)),o.x=this.app.screen.width/3,o.y=this.app.screen.height/2,o.pivot.x=o.width/2,o.pivot.y=o.height/2,console.log("Point is in the triangle:".concat(w.pointInTri(this.tri.coords,2,-2))),this.app.ticker.add((function(t){e.tri&&e.tri.draw()}))}},{key:"acceptCommand",value:function(e){console.log(e)}},{key:"onMoveComplete",value:function(){for(var e in this.entities)w.pointInTri(this.tri.coords,e.x,e.y);w.checkWin(this.tri.coords,this.goal.coords)?(this.allowMove=!1,this.levelComplete()):this.allowMove=!0}},{key:"levelComplete",value:function(){console.log("You win!")}}]),e}(),C=(o(35),function(e){function t(e){var o;return Object(s.a)(this,t),(o=Object(l.a)(this,Object(h.a)(t).call(this,e))).moveUpTest=function(){o.game.acceptCommand("tried to move up")},o.canvasRef=i.a.createRef(),o.canvas=o.canvasRef.current,o.app=void 0,o.game=void 0,o.state={},o}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.canvas=e.canvasRef.current,e.app=new d.a({width:1024,height:576,backgroundColor:1087931,view:e.canvas,resolution:window.devicePixelRatio||1}),e.game=new j(e.app),e.game.start()}),5)}},{key:"render",value:function(){return i.a.createElement("div",{id:"app-container"},i.a.createElement("h3",null,"(Ver 2) Temporary Controls"),i.a.createElement("p",null,"Use the arrow keys to translate"),i.a.createElement("p",null,"Use Q and E to rotate"),i.a.createElement("p",null,"Use H and V to reflect"),i.a.createElement("div",{id:"game-container"},i.a.createElement("canvas",{ref:this.canvasRef}),i.a.createElement(v,{hidden:!1,moveUp:this.moveUpTest,moveDown:function(){},moveLeft:function(){},moveRight:function(){}})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.a34469cd.chunk.js.map